<div class="flex-center">
    <button type="button" class="btn btn-green" name="save" (click)="refresh()">
      <md-icon md-list-icon >autorenew</md-icon>
      <div>Обновить</div>
    </button>
</div>
<div class="layer"></div>
<div class="flex-center flex-wrap">
  <md-card class="chip-card">
    <div class="chip-title">
      Средняя ставка за всё время
    </div>
    <div class="flex-between align-center">
      <div class="big-num">
        {{average *100 | number:'1.3-6'}}
      </div>
      <md-icon class="bg-icon">accessibility</md-icon>
    </div>
  </md-card>
  <div class="layer"></div>
  <md-card class="chip-card">
    <div class="chip-title">
      Баланс BTC(лендинг)
    </div>
    <div class="flex-between align-center">
      <div class="big-num">
        {{landingBTCBalance}}
      </div>
      <md-icon class="bg-icon">supervisor_account</md-icon>
    </div>
  </md-card>
  <div class="layer"></div>
  <md-card class="chip-card">
    <div class="chip-title">
      Текущий курс BTC
    </div>
    <div class="flex-between align-center">
      <div class="big-num">
        4573
      </div>
      <div class="arrow">
        <md-icon class="up-icon">arrow_upward</md-icon>
        <!-- <md-icon class="down-icon">arrow_downward</md-icon> -->
      </div>
      <md-icon class="bg-icon">attach_money</md-icon>
    </div>
    <div class="ps-info">
      <span class="ps-title">
        Вчера.:
      </span>
      <span>
        4500
      </span>
    </div>
  </md-card>
</div>
<div class="flex-center flex-wrap charts-wrapper">
  <md-card class="chart-wrapper chart-wrapper-300">
    <div class="table-title">
      Соотношения доступный баланс/открытые предложения
    </div>
    <div>
      <canvas baseChart
                  [data]="userTypeChartData"
                  [labels]="userTypeChartLabels"
                  [chartType]="userTypeChartType"
                  (chartHover)="chartHovered($event)"
                  (chartClick)="chartClicked($event)"></canvas>
    </div>
  </md-card>
  <div class="layer"></div>
  <md-card class="chart-wrapper chart-wrapper-500">
    <div class="table-title">
      Статистика по средней ставке
    </div>
    <div>
      <canvas baseChart
            [datasets]="monthChartData"
            [labels]="monthChartLabels"
            [options]="monthChartOptions"
            [legend]="monthChartLegend"
            [chartType]="monthChartType"
            (chartHover)="chartHovered($event)"
            (chartClick)="chartClicked($event)"></canvas>
    </div>
  </md-card>
  <div class="layer"></div>
  <md-card class="chart-wrapper chart-wrapper-300">
    <div class="table-title">
      Тут будет еще диаграммка
    </div>
    <div>
      <canvas baseChart
                  [data]="shareChartData"
                  [labels]="shareChartLabels"
                  [chartType]="shareChartType"
                  (chartHover)="chartHovered($event)"
                  (chartClick)="chartClicked($event)"></canvas>
    </div>
  </md-card>
</div>
<div class="flex tables-wrapper ">
  <md-card class="full-width ">
    <div class="table-title">
      Активные займы
    </div>
    <table>
      <thead>
        <tr>
          <td>Монета</td>
          <td>Ставка</td>
          <td>Количество</td>
          <td>Срок</td>
          <td>Профит</td>
          <td>Дата</td>
          <td>Истекает</td>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let loan of activeLoans">
          <td>{{loan?.currency}}</td>
          <td>{{loan?.rate *100 | number:'1.3-6'}}</td>
          <td>{{loan?.amount}}</td>
          <td>{{loan?.duration}} дня</td>
          <td>{{loan?.fees}}</td>
          <td>{{loan?.date | date: 'hh:mm dd.MM.yyyy'}}</td>
          <td>{{calculateRamain(loan)}}</td>
        </tr>
      </tbody>
    </table>
  </md-card>
  <div class="layer"></div>
  <md-card class="full-width">
      <div class="table-title">
        Открытые предложения на займ
      </div>
      <table>
        <thead>
          <tr>
            <td>Монета</td>
            <td>Ставка</td>
            <td>Количество</td>
            <td>Срок</td>
            <td>Авто продление</td>
            <td>Дата создания</td>
            <td>Действия</td>
          </tr>
        </thead>
        <tbody>
            <tr *ngFor="let loan of openLoansOffer">
            <td>{{loan?.coin}}</td>
            <td>{{loan?.rate *100 | number:'1.3-6'}}</td>
            <td>{{loan?.amount}}</td>
            <td>{{loan?.duration}} дня</td>
            <td>{{autoRenew[loan?.autoRenew]}}</td>
            <td>{{loan?.date | date: 'hh:mm dd.MM.yyyy'}}</td>
            <td>
              <div class="flex-center">
                <div class="btn-red chip" (click)="cancelLoanOffer(loan.id)" mdTooltip="Отменить">
                  <md-icon md-list-icon >delete_forever</md-icon>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </md-card>
</div>
<div class="layer"></div>
<div class="flex tables-wrapper ">
  <md-card class="full-width ">
    <div class="table-title">
      Complete balance list
    </div>
    <table>
      <thead>
        <tr>
          <td>Монета</td>
          <td>Доступно</td>
          <td>В заказах</td>
          <td>BTC эквивалент</td>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let balance of completeBalances">
          <td>{{balance?.coin}}</td>
          <td>{{balance?.balance?.available}}</td>
          <td>{{balance?.balance?.onOrders}}</td>
          <td>{{balance?.balance?.btcValue}}</td>
        </tr>
      </tbody>
    </table>
  </md-card>
  <div class="layer"></div>
  <md-card class="full-width">
      <div class="table-title">
        Текущие предложения на займ
      </div>
      <table>
        <thead>
          <tr>
            <td>Монета</td>
            <td>Ставка</td>
            <td>Количество</td>
            <td>Срок</td>
          </tr>
        </thead>
        <tbody>
            <tr *ngFor="let loan of lastLoans">
            <td>BTC</td>
            <td>{{loan?.rate *100 | number:'1.3-6'}}</td>
            <td>{{loan?.amount}}</td>
            <td>{{loan?.rangeMin}}-{{loan?.rangeMax}}  дня</td>
          </tr>
        </tbody>
      </table>
    </md-card>
</div>
